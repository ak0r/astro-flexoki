---
import { Icon } from 'astro-icon/components';
import ThemeSwitch from "@/components/widgets/ThemeSwitch.astro";
import Container from './Container.astro';
---

<header class="fixed top-0 w-full h-[76px] border-b border-ink/10">

  <!-- Mobile menu -->
  <div id="navMenu" class="fixed backdrop-blur-lg bg-paper shadow-sm h-full w-full text-xl sm:w-1/2 sm:text-2xl transform transition-transform duration-300 -translate-x-full z-50">
    <div class="flex flex-col w-full">
      <!-- Logo -->
      <div class="flex items-center justify-between font-medium px-4 py-2 h-[76px] border-b border-ink/10">
        <a class="flex items-center gap-2" href="/">
          <div class="text-lg font-bold">Umami</div>
        </a>
        <div id="closeBtn" class="">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={2} stroke="currentColor" class="size-6">
            <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>                  
        </div>
      </div>
      <!-- Links -->
      <div class="flex flex-col gap-3 py-8">
        <a class="px-4 py-2 duration-500 ease-in-out opacity-50 hover:opacity-100" href="/">Categories</a>
        <a class="px-4 py-2 duration-500 ease-in-out opacity-50 hover:opacity-100" href="/">Membership</a>
        <a class="px-4 py-2 duration-500 ease-in-out opacity-50 hover:opacity-100" href="/">Resources</a>
      </div>
      <!-- Subscribe button -->
      <div class="px-4 py-2">
        <button class="text-lg font-medium border rounded-3xl py-2 px-3 hover:bg-subtle/30">
          Subscribe
        </button>
      </div>
    </div>
  </div>
  <Container outerClass="flex flex-col max-w-4xl px-4 py-2 mx-auto h-full">
    <!-- Main Navigation -->
    <nav class="flex h-full w-full">
      <!-- Logo -->
      <a class="flex items-center gap-2" href="/">
        <div class="text-lg font-bold">Umami</div>
      </a>

      <!-- Centered Links (only visible on sm and up) -->
      <div class="hidden sm:flex flex-1 justify-center items-center gap-5 text-base">
        <a class="duration-500 ease-in-out opacity-50 hover:opacity-100" href="/">Categories</a>
        <a class="duration-500 ease-in-out opacity-50 hover:opacity-100" href="/">Membership</a>
        <a class="duration-500 ease-in-out opacity-50 hover:opacity-100" href="/">Resources</a>
      </div>

      <!-- Right section -->
      <div class="flex items-center gap-3 ml-auto">
        <!-- Theme Switcher (always visible) -->
        <ThemeSwitch />

        <!-- Subscribe button (only on sm and up) -->
        <button class="text-base font-medium border rounded-3xl py-2 px-3 hidden sm:flex hover:bg-subtle/30">
          Subscribe
        </button>

        <!-- Mobile nav button (only on small screens) -->
        <div id="navBtn" class="sm:hidden text-ink hover:cursor-pointer opacity-60 hover:opacity-100">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={2} stroke="currentColor" class="size-6">
            <path strokeLinecap="round" strokeLinejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" />
          </svg>
        </div>
      </div>
    </nav>
  </Container>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const navBtn = document.getElementById("navBtn");
      const navMenu = document.getElementById("navMenu");
      const closeBtn = document.getElementById("closeBtn");

      navBtn.addEventListener("click", function () {
        navMenu.classList.remove("-translate-x-full");
        navMenu.classList.add("translate-x-0");
        document.body.classList.add("overflow-hidden");
      });

      closeBtn.addEventListener("click", function () {
        navMenu.classList.remove("translate-x-0");
        navMenu.classList.add("-translate-x-full");
        document.body.classList.remove("overflow-hidden");
      });
    });
  </script>
</header>